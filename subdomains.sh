subdomains() {
   if [[ "$(dig @1.1.1.1 A,CNAME {test321123,testingforwildcard,plsdontgimmearesult}.$domain +short | wc -l)" -gt "1" ]]; then
    echo "[!] Possible wildcard detected."
   fi
   mkdir $1; cd $1;
   subfinder -d $1 -silent -o sub.list.tmp;
   dnsmap -d $1 | grep -v "IP address" > dnsmap.list.tmp;
   amass enum -brute -silent -d quantopian.com -json ./amass.json;
   jq -r '.name' ./amass.json > amass.list.tmp;
   
   cat sub.list.tmp >> merge.list.tmp;
   cat amass.list.tmp >> merge.list.tmp;
   cat dnsmap.list.tmp >> merge.list.tmp;
   
   sort merge.list.tmp | uniq > $1_domains;

   sudo naabu -hL $1_domains -silent -t 10 -o $1_ports;
   
   cat $1_ports |httprobe -c 30 > $1_schemes;
   
   sudo nuclei -c 10 -t ~/nuuclei-templates/subdomain-takerover/detect-*.yaml -silent -o $1_takeovers -l $1_schemes;
   sudo dnsprobe -l $1_domains -o $1_ips -silent;
   sudo dnsprobe -l $1_domains -r CNAME -o $1_cnames -silent;
}
